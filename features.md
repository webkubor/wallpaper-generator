# Wallpaper Generator (壁纸生成器)

**口号 (Title):** 创意壁纸，一键生成。轻松定制你的专属设备背景与社交媒体素材。

**项目描述 (Description):** 一款现代、简洁的在线工具，允许用户上传自己的图片，添加个性化水印，并实时预览在 iPhone、iPad、MacBook 以及小红书帖子尺寸下的壁纸效果，最后生成并下载高质量的成品图。

---

## 1. 产品需求明细 (Product Requirements)

### 1.1. 核心功能 (Core Features)

#### 1.1.1. 图片上传与管理
- **[F-01]** 用户可以通过点击按钮或拖拽区域的方式上传本地图片（支持 `.jpg`, `.png`, `.webp` 格式）。
- **[F-02]** 上传后，图片将作为画布背景，并实时在所有预览窗口中更新。
- **[F-03]** 提供“清除”或“替换图片”功能，方便用户更换素材。

#### 1.1.2. 实时预览 (Live Preview)
- **[F-04]** 提供一个响应式的预览区域，展示最终壁纸效果。
- **[F-05]** 预览区域包含多个设备模型，用户可选择性地开启或关闭：
  - iPhone (锁屏界面样式)
  - iPad (锁屏界面样式)
  - MacBook (桌面样式)
  - 小红书 (标准 3:4 帖子样式)
- **[F-06]** 所有对水印、背景等的调整都必须实时反映在预览视图中，所见即所得。

#### 1.1.3. 水印编辑器 (Watermark Editor)
- **[F-07]** **文本内容**: 提供一个输入框，让用户自定义水印文字。
- **[F-07.5]** **图片水印**: 允许用户上传一张图片作为附加水印。
- **[F-08]** **字体选择**: 提供一个下拉列表，包含多种预设的艺术字体和中英文字体（引用自 `src/styles/font.scss`）。
  - `AlimamaFangYuanTiVF-Thin` (阿里妈妈方圆体)
  - `drizzle` (细雨体)
  - `cute` (可爱体)
  - `vampire-wars` (吸血鬼战争)
  - `AiChinese02` / `Chinese3` (AI中文)
- **[F-09]** **字体大小**: 提供滑块（Slider）让用户可以平滑调整字体大小。
- **[F-10]** **字体颜色**: 提供一个颜色选择器（Color Picker）。
- **[F-11]** **透明度**: 提供滑块调整水印的透明度 (Opacity)。
- **[F-12]** **位置**: 提供九宫格或下拉列表让用户选择水印位置（左上、中上、右上、左中、居中、右中、左下、中下、右下）。
- **[F-13]** **旋转角度**: 提供滑块调整水印的旋转角度（-180° 到 180°）。
- **[F-14]** **边距**: 提供数字输入框调整水印距离画布边缘的距离 (Padding)。

#### 1.1.4. 生成与下载
- **[F-15]** 提供一个醒目的“生成壁纸”或“下载”按钮。
- **[F-16]** 用户点击下载时，应用应将当前预览的画布（包含图片和水印）合成为一张高质量的图片，并触发浏览器下载。
- **[F-17]** 如果用户选择了多种设备预览，可以考虑提供分别下载或打包下载的选项。

### 1.2. UI/UX 设计考量 (UI/UX Considerations)
- **[UX-01]** **整体布局**: 采用两栏式布局：
  - **左侧**: 设置面板，使用折叠组件（Collapse）将设置项归类为“基础设置”、“水印与文字”、“布局与导出”，使界面更整洁。
  - **中间**: 实时预览区域。
- **[UX-02]** **设计风格**: 遵循项目已定义的现代、简洁风格，使用 `Naive UI` 组件库，并确保深/浅色模式切换流畅、美观。
- **[UX-03]** **交互反馈**: 所有交互（如上传、滑块拖动、点击）都应有即时和明确的视觉反馈。
- **[UX-04]** **响应式设计**: 确保在不同尺寸的桌面浏览器上都有良好的使用体验。

---

## 2. 开发细节 (Development Details)

### 2.1. 组件结构 (Component Architecture)
- `App.vue`: 应用根组件，负责提供全局样式、主题切换和整体布局。
- `WallpaperEditor.vue`: 核心组件，整合了设置面板和预览区域，是应用的主要交互界面。

### 2.2. 状态管理 (State Management)
- 使用 `src/composables/useWallpaper.ts` 作为核心的状态管理单元，集中管理所有与壁纸生成相关的状态。
- **`imageUrl`**: `ref<string | null>` - 存储用户上传的背景图片 URL。
- **`watermarkImageUrl`**: `ref<string | null>` - 存储用户上传的图片水印 URL。
- **`watermarkSettings`**: `ref<WatermarkSettings>` - 存储所有水印配置。
- **`previewSettings`**: `ref<PreviewSettings>` - 存储设备选择、背景色等预览相关的配置。
- 所有设置项的更改都通过修改这些 ref 来触发视图更新。

### 2.3. 核心逻辑 (Core Logic)
- **图片渲染**: 在 `PreviewArea.vue` 中，使用 `<img>` 或 `canvas` 的背景图来展示用户上传的图片。
- **水印渲染**: 水印本身可以是一个绝对定位的 `<div>` 元素，其样式（颜色、字体、位置等）与 `watermarkSettings` 动态绑定。
- **壁纸生成**: 使用 `html2canvas` 或类似库，在用户点击下载时，将预览区的特定 DOM 节点（画布+水印）转换成图片数据，然后生成可供下载的链接。
